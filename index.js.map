{"version":3,"file":"index.js","sources":["../src/js/header.js","../src/js/loader.js","../src/js/order-modal.js","../src/img/Furniture-img/1_1x-min.png","../src/img/Furniture-img/1_2x-min.png","../src/img/Furniture-img/2_1x-min.png","../src/img/Furniture-img/2_2x-min.png","../src/img/Furniture-img/3_1x-min.png","../src/img/Furniture-img/3_2x-min.png","../src/img/Furniture-img/4_1x-min.png","../src/img/Furniture-img/4_2x-min.png","../src/img/Furniture-img/5_1x-min.png","../src/img/Furniture-img/5_2x-min.png","../src/img/Furniture-img/6_1x-min.png","../src/img/Furniture-img/6_2x-min.png","../src/img/Furniture-img/7_1x-min.png","../src/img/Furniture-img/7_2x-min.png","../src/img/Furniture-img/8_1x-min.png","../src/img/Furniture-img/8_2x-min.png","../src/img/Furniture-img/9_1x-min.png","../src/img/Furniture-img/9_2x-min.png","../src/img/Furniture-img/10_1x-min.png","../src/img/Furniture-img/10_2x-min.png","../src/img/Furniture-img/11_1x-min.png","../src/img/Furniture-img/11_2x-min.png","../src/img/Furniture-img/12_1x-min.png","../src/img/Furniture-img/12_2x-min.png","../src/img/Furniture-img/13_1x-min.png","../src/img/Furniture-img/13_2x-min.png","../src/js/furniture-detail.js","../src/js/feedback.js"],"sourcesContent":["const headerMenu = document.querySelector('.header-menu');\nconst burgerBtn = document.querySelector('.burger-btn')\nconst closeBtn = document.querySelector('.mobile-menu-button');\nconst mobileMenuLinks = document.querySelectorAll('.header-menu-link');\nfunction toggleMenuVisibility(e) {\n  if (e.matches) {\n    headerMenu.classList.remove('is-hidden');\n    burgerBtn.classList.add('is-hidden');\n    closeBtn.classList.add('is-hidden');\n  } else {\n    headerMenu.classList.add('is-hidden');\n    burgerBtn.classList.remove('is-hidden');\n    closeBtn.classList.add('is-hidden');\n  }\n}\nconst mediaQuery = window.matchMedia('(min-width: 1440px)');\nmediaQuery.addEventListener('change', toggleMenuVisibility);\ntoggleMenuVisibility(mediaQuery);\n\n// Menu click\n\nburgerBtn.addEventListener('click', ()=>{\nburgerBtn.classList.add('is-hidden');\nheaderMenu.classList.remove('is-hidden');\ncloseBtn.classList.remove('is-hidden');\nif (window.innerWidth < 768) {\n    document.body.classList.add('no-scroll');\n  }\n});\n// X button\ncloseBtn.addEventListener('click',()=>{\nburgerBtn.classList.remove('is-hidden');\nheaderMenu.classList.add('is-hidden');\ncloseBtn.classList.add('is-hidden');\ndocument.body.classList.remove('no-scroll');\n});\n// close menu after lіnk click\nmobileMenuLinks.forEach(link => {\n  link.addEventListener('click', () => {\n    closeBtn.classList.add('is-hidden');\n    document.body.classList.remove('no-scroll');\n    if (window.innerWidth < 1440){\n    burgerBtn.classList.remove('is-hidden');\n    headerMenu.classList.add('is-hidden');}\n  });\n});\n\n//  close menu after lіnk to free space\n\ndocument.addEventListener('click', (event) => {\n  const windowWidth = window.innerWidth;\n  const isClickInsideMenu = headerMenu.contains(event.target);\n  const isClickOnBurgerBtn = burgerBtn.contains(event.target);\n  const isClickOnCloseBtn = closeBtn.contains(event.target);\n\n\n  if (\n    windowWidth >= 768 && windowWidth <= 1439 &&\n    !isClickInsideMenu &&\n    !isClickOnBurgerBtn &&\n    !isClickOnCloseBtn &&\n    !headerMenu.classList.contains('is-hidden')\n  ) {\n    headerMenu.classList.add('is-hidden');\n    burgerBtn.classList.remove('is-hidden');\n    closeBtn.classList.add('is-hidden');\n    document.body.classList.remove('no-scroll');\n  }\n});","\nconst loaderOverlay = document.getElementById(\"loaderOverlay\");\n\nexport function showLoader() {\n  loaderOverlay.classList.remove(\"visually-hidden\");\n}\n\nexport function hideLoader() {\n  loaderOverlay.classList.add(\"visually-hidden\");\n}\n\n","// import { Notify } from 'notiflix';\n\nexport { openOrderModal, closeOrderModal };\n  \nasync function sendOrder(orderData) {\n  const response = await fetch('https://furniture-store.b.goit.study/api/orders', {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(orderData),\n  });\n\n  if (!response.ok) {\n    // Спробуємо прочитати текст або JSON, якщо є\n    let errorText;\n    try {\n      errorText = await response.text();\n    } catch {\n      errorText = 'No response body';\n    }\n    throw new Error(`Failed to send order: ${response.status} ${response.statusText} - ${errorText}`);\n  }\n  return response.json();\n}\nconst orderModal = document.querySelector('.backdrop-modal');\nconst orderModalForm = document.querySelector('.modal-form');\nconst orderModalCloseBtn = document.querySelector('.modal-close-btn');\n\nfunction openOrderModal(furnitureId, color) {\n   orderModal.classList.add('is-open');\n  \n  document.body.style.overflow = 'hidden';\n\n  // Встановлюємо значення прихованих полів у формі\n  orderModalForm.querySelector('#furnitureId').value = furnitureId || '';\n  orderModalForm.querySelector('#color').value = color || '';\n\n  document.addEventListener('keydown', closeModalOnEsc);\n  orderModal.addEventListener('click', closeModalOnOverlayClick);\n}\n\nfunction closeOrderModal() {\n    orderModal.classList.remove('is-open');\n  document.body.style.overflow = '';\n  document.removeEventListener('keydown', closeModalOnEsc);\n  orderModal.removeEventListener('click', closeModalOnOverlayClick);\n}\n\nfunction closeModalOnEsc(event) {\n  if (event.key === 'Escape') {\n    closeOrderModal();\n  }\n}\n\nfunction closeModalOnOverlayClick(event) {\n  if (event.target === orderModal) {\n    closeOrderModal();\n  }\n}\n\norderModalCloseBtn.addEventListener('click', closeOrderModal);\n\norderModalForm.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  const email = orderModalForm.elements['user-email'].value;\n  const phoneRaw = orderModalForm.elements['user-phone'].value.trim();\n  const comment = orderModalForm.elements['user-comment'].value;\n\n  // Тепер беремо furnitureId та color із прихованих полів\n  const furnitureId = orderModalForm.elements['furnitureId'].value;\n  const color = orderModalForm.elements['color'].value;\n\n  const phone = phoneRaw.replace(/\\D/g, '');\n  const orderData = {\n    email,\n    phone,\n    comment,\n    modelId: furnitureId,\n    color,\n  };\n\n\n  try {\n    const response = await sendOrder(orderData);\n    Notiflix.Notify.success('Your order has been placed successfully!');\n    orderModalForm.reset();\n    closeOrderModal();\n  } catch (error) {\n  const message = (error && typeof error.message === 'string')\n    ? error.message\n    : 'Сталася невідома помилка. Спробуйте пізніше.';\n  Notiflix.Notify.failure(message);\n}\n  \n});\n\n","export default \"__VITE_ASSET__Bd8TCgKg__\"","export default \"__VITE_ASSET__1y312REe__\"","export default \"__VITE_ASSET__Cd0L0_$w__\"","export default \"__VITE_ASSET__jsLklUKV__\"","export default \"__VITE_ASSET__BUCkdsSA__\"","export default \"__VITE_ASSET__Dto0h6Aa__\"","export default \"__VITE_ASSET__CuQ8fRID__\"","export default \"__VITE_ASSET__BZX5d7zM__\"","export default \"__VITE_ASSET__C6iZb2am__\"","export default \"__VITE_ASSET__BUtdMiRH__\"","export default \"__VITE_ASSET__DB8ccCgS__\"","export default \"__VITE_ASSET__Ddr_AADU__\"","export default \"__VITE_ASSET__BjpcIWMD__\"","export default \"__VITE_ASSET__oH$dfu5Y__\"","export default \"__VITE_ASSET__CLL9RGog__\"","export default \"__VITE_ASSET__BV7VJfwz__\"","export default \"__VITE_ASSET__D_qSJOg5__\"","export default \"__VITE_ASSET__DtkqUPTN__\"","export default \"__VITE_ASSET__YvZVzV7C__\"","export default \"__VITE_ASSET__B9HcLVzR__\"","export default \"__VITE_ASSET__Cj8HGjfM__\"","export default \"__VITE_ASSET__CShwJHhQ__\"","export default \"__VITE_ASSET__DXfXH$jT__\"","export default \"__VITE_ASSET__3m8hQmqI__\"","export default \"__VITE_ASSET__c34hOwQN__\"","export default \"__VITE_ASSET__D1nHtO0J__\"","import { openOrderModal } from './order-modal';\nconst modal = document.querySelector(\".furniture-detail-modal\");\nconst backdrop = document.querySelector(\".backdrop\");\nconst closeBtn = document.querySelector(\".close-btn\");\nconst modalContent = document.querySelector(\".modal-content\");\n\n\nexport function openProductModal(product) {\n  if (!product) {\n    iziToast.warning({\n      message: \"Продукт не обраний\",\n      position: \"topRight\"\n    })\n    return;\n  }\n\n   const rate = product.rate || 0;\n  const maxIcons = 5;\n\n  const thumbsMarkup = Array.from({ length: maxIcons }, () => `<i class=\"fa-solid fa-thumbs-up thumb-icon\"></i>`).join('');\n  \n  backdrop.classList.add(\"is-open\");\n  document.body.classList.add(\"no-scroll\");\n\n  modalContent.innerHTML = `\n    <div class=\"images\">\n      <div class=\"main-image-wrapper\">\n        <img src=\"${product.images?.[0] || ''}\" alt=\"${product.name || ''}\" class=\"main-image\">\n      </div>\n      <ul class=\"small-images-list\">\n        ${(product.images || [])\n          .slice(1)\n          .map(\n            img => `\n              <li class=\"small-images-list-item\">\n                <img src=\"${img}\" alt=\"${product.name || ''}\" class=\"thumb\">\n              </li>\n            `\n          )\n          .join(\"\")}\n      </ul>\n    </div>\n    <div class=\"descr\">\n      <h3 class=\"furniture-name\">${product.name || ''}</h3>\n      <p class=\"furniture-category-text\">${product.category?.name || \"\"}</p>\n      <form>\n        <p class=\"price\">${product.price || ''} <span class=\"currency\">грн</span></p>\n        <div class=\"rating\" data-rate=\"${rate}\">\n          ${thumbsMarkup}\n        </div>\n        <p class=\"color\">Колір</p>\n        <ul class=\"color-list\">\n  ${(product.color || [])\n    .map(\n      (color, index) => `\n        <li class=\"color-list-item\">\n          <input type=\"checkbox\" id=\"color-${index}\" name=\"color-${index}\" value=\"${color}\">\n          <label for=\"color-${index}\" style=\"background:${color};\"></label>\n        </li>\n      `\n    )\n    .join(\"\")}\n</ul>\n        <p class=\"descr-text\">${product.description || \"\"}</p>\n        <p class=\"product-size\">Розміри: ${product.sizes || \"\"}</p>\n        <button type=\"submit\" class=\"form-btn\">Перейти до замовлення</button>\n      </form>\n    </div>\n  `;\n  animateThumbsInModal();\n\n  // Слухач для мініатюр\n  const smallImages = modalContent.querySelector(\".small-images-list\");\n  if (smallImages) {\n    smallImages.addEventListener(\"click\", e => {\n      const thumb = e.target.closest(\".thumb\");\n      if (!thumb) return;\n      const mainImage = modalContent.querySelector(\".main-image\");\n      const tempSrc = mainImage.src;\n      mainImage.src = thumb.src;\n      thumb.src = tempSrc;\n    });\n  }\n\n  \n  const form = modalContent.querySelector(\"form\");\n  if (form) {\n    form.addEventListener(\"submit\", e => {\n      e.preventDefault();\n      const checkedColor = form.querySelector('input[type=\"checkbox\"]:checked');\n      if (!checkedColor) {\n        iziToast.info({\n          message: \"Оберіть, будь ласка, колір.\",\n          position: \"topRight\"\n        })\n        return;\n      }\n     \n      closeModal();\n      openOrderModal(product._id, checkedColor.value);\n    });\n  }\n}\n\n\nfunction animateThumbsInModal() {\n  const ratingContainer = modalContent.querySelector('.rating');\n  if (!ratingContainer) return;\n\n  const rate = parseFloat(ratingContainer.getAttribute('data-rate'));\n  const icons = ratingContainer.querySelectorAll('.thumb-icon');\n\n  icons.forEach(icon => {\n    icon.classList.remove('fill', 'half');\n  });\n\n  icons.forEach((icon, index) => {\n    setTimeout(() => {\n      if (index < Math.floor(rate)) {\n        icon.classList.add('fill');\n      } else if (index === Math.floor(rate) && rate % 1 !== 0) {\n        icon.classList.add('half');\n      }\n    }, index * 200);\n  });\n}\n\n\n\nfunction closeModal() {\n  backdrop.classList.remove(\"is-open\");\n  document.body.classList.remove(\"no-scroll\");\n}\n\nif (closeBtn) {\n  closeBtn.addEventListener(\"click\", closeModal);\n}\n\nif (backdrop) {\n  backdrop.addEventListener(\"click\", e => {\n    if (e.target === backdrop) closeModal();\n  });\n}\ndocument.addEventListener(\"keydown\", e => {\n  if (e.key === \"Escape\" && backdrop.classList.contains(\"is-open\")) {\n    closeModal();\n  }\n})\n\nmodalContent.addEventListener('change', event => {\n  if (event.target.matches('.color-list input[type=\"checkbox\"]')) {\n    const group = event.target.closest('.color-list');\n    group.querySelectorAll('input[type=\"checkbox\"]').forEach(cb => {\n      if (cb !== event.target) cb.checked = false;\n    });\n  }\n});\n\n\nimport axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport img1x from '/img/Furniture-img/1_1x-min.png';\nimport img2x from '/img/Furniture-img/1_2x-min.png';\nimport img3x from '/img/Furniture-img/2_1x-min.png';\nimport img4x from '/img/Furniture-img/2_2x-min.png';\nimport img5x from '/img/Furniture-img/3_1x-min.png';\nimport img6x from '/img/Furniture-img/3_2x-min.png';\nimport img7x from '/img/Furniture-img/4_1x-min.png';\nimport img8x from '/img/Furniture-img/4_2x-min.png';\nimport img9x from '/img/Furniture-img/5_1x-min.png';\nimport img10x from '/img/Furniture-img/5_2x-min.png';\nimport img11x from '/img/Furniture-img/6_1x-min.png';\nimport img12x from '/img/Furniture-img/6_2x-min.png';\nimport img13x from '/img/Furniture-img/7_1x-min.png';\nimport img14x from '/img/Furniture-img/7_2x-min.png';\nimport img15x from '/img/Furniture-img/8_1x-min.png';\nimport img16x from '/img/Furniture-img/8_2x-min.png';\nimport img17x from '/img/Furniture-img/9_1x-min.png';\nimport img18x from '/img/Furniture-img/9_2x-min.png';\nimport img19x from '/img/Furniture-img/10_1x-min.png';\nimport img20x from '/img/Furniture-img/10_2x-min.png';\nimport img21x from '/img/Furniture-img/11_1x-min.png';\nimport img22x from '/img/Furniture-img/11_2x-min.png';\nimport img23x from '/img/Furniture-img/12_1x-min.png';\nimport img24x from '/img/Furniture-img/12_2x-min.png';\nimport img25x from '/img/Furniture-img/13_1x-min.png';\nimport img26x from '/img/Furniture-img/13_2x-min.png';\nimport { hideLoader, showLoader } from './loader';\n\nconst furnitureList = document.querySelector('.furniture-list');\nconst categoriesList = document.getElementById('categoriesList');\nconst loadMoreBtn = document.getElementById('load-more');\n\n\n\nconst API_BASE = 'https://furniture-store.b.goit.study/api';\n\nexport const imgArr = [\n  { src: img1x,  src2x: img2x,  alt: 'Меблі від Меблерія' },\n  { src: img3x,  src2x: img4x,  alt: 'Меблі від Меблерія' },\n  { src: img5x,  src2x: img6x,  alt: 'Меблі від Меблерія' },\n  { src: img7x,  src2x: img8x,  alt: 'Меблі від Меблерія' },\n  { src: img9x,  src2x: img10x, alt: 'Меблі від Меблерія' },\n  { src: img11x, src2x: img12x, alt: 'Меблі від Меблерія' },\n  { src: img13x, src2x: img14x, alt: 'Меблі від Меблерія' },\n  { src: img15x, src2x: img16x, alt: 'Меблі від Меблерія' },\n  { src: img17x, src2x: img18x, alt: 'Меблі від Меблерія' },\n  { src: img19x, src2x: img20x, alt: 'Меблі від Меблерія' },\n  { src: img21x, src2x: img22x, alt: 'Меблі від Меблерія' },\n  { src: img23x, src2x: img24x, alt: 'Меблі від Меблерія' },\n  { src: img25x, src2x: img26x, alt: 'Меблі від Меблерія' },\n];\n\n// Працюй, падлюка!\n\n\nconst state = {\n  categories: [],\n  currentCategoryId: '0',\n  currentPage: 1,\n  limit: 8,\n  totalLoaded: 0,\n  totalAvailable: 0,\n  lastLoadedFurnitures: []\n}\n// --- Стан ---\n// let categories = [];\n// let currentCategoryId = '0'; // '0' - всі товари\n// let currentPage = 1;\n// const limit = 8;\n// let totalLoaded = 0;\n// let totalAvailable = 0;\n// let lastLoadedFurnitures = [];\n// --- Функції ---\n\n// Отримання категорій\nasync function fetchCategory() {\n  showLoader();\n  try {\n    const res = await axios.get(`${API_BASE}/categories`);\n    return res.data || [];\n  } catch (error) {\n    iziToast.error({\n      message: 'Сталася помилка при отриманні категорій',\n      position: 'topRight',\n    });\n    return [];\n  } finally {\n  hideLoader();\n  }\n}\n\n// Створення розмітки категорій з урахуванням активної\nfunction createMarkupCategory(categories, arrImg, activeId) {\n  if (!categories || !arrImg) return '';\n\n  const firstLi = `\n    <li class=\"category-item special-category wrapper_category ${\n      activeId === '0' ? 'active' : ''\n    }\" data-id=\"0\">\n      <img class=\"img_category\" src=\"${arrImg[0]?.src}\" srcset=\"${\n    arrImg[0]?.src2x\n  } 2x\" alt=\"${arrImg[0]?.alt}\" />\n      <p class=\"text_category\">Всі товари</p>\n    </li>\n  `;\n\n  const otherItems = categories\n    .map(\n      ({ _id, name }, i) => `\n      <li class=\"category-item wrapper_category ${\n        activeId === _id ? 'active' : ''\n      }\" data-id=\"${_id}\">\n        <img class=\"img_category\" src=\"${arrImg[i + 1]?.src}\" srcset=\"${\n        arrImg[i + 1]?.src2x\n      } 2x\" alt=\"${name}\" />\n        <p class=\"text_category\">${name}</p>\n      </li>\n    `\n    )\n    .join('');\n\n  return firstLi + otherItems;\n}\n\n// Завантаження меблів з пагінацією та фільтрацією\nasync function fetchFurnitures({ category = '0', page = 1, limit = 8 } = {}) {\n  showLoader();\n  try {\n    const params = { page, limit };\n    if (category !== '0') params.category = category;\n\n    const res = await axios.get(`${API_BASE}/furnitures`, { params });\n   \n\n     const furnitures = res.data?.furnitures || [];\n    const total =\n  Number(res.data?.total ?? res.data?.totalItems ?? res.data?.totalCount ?? res.data?.totalFurnitures ?? 0);\n\n  \n\n    return { furnitures, total };\n  } catch (error) {\n    iziToast.error({\n      message: 'Помилка отримання меблів',\n      position: 'topRight',\n    });\n    return { furnitures: [], total: 0 };\n  } finally {\n    hideLoader();\n  }\n}\n\n// Рендер меблів, append = true додає в кінець списку\nfunction renderFurnitureList(furnitures, append = false) {\n  if (!append) {\n    furnitureList.innerHTML = '';\n    state.lastLoadedFurnitures = furnitures;  // Зберігаємо нові дані при повній заміні списку\n    \n  } else {\n    state.lastLoadedFurnitures = [...state.lastLoadedFurnitures, ...furnitures];  // Додаємо при дозавантаженні\n  }\n  \n  // if (!append) furnitureList.innerHTML = '';\n\n  if (!Array.isArray(furnitures) || furnitures.length === 0) {\n    if (!append)\n      furnitureList.innerHTML = '<p>Товари відсутні в цій категорії</p>';\n    return;\n  }\n\n  const markup = furnitures\n    .map(({ _id, name, price, images, color }) => {\n      const colorsMarkup =\n        Array.isArray(color) && color.length > 0\n          ? color\n              .map(c => {\n                const cleanColorId = c.replace(/[^a-zA-Z0-9]/g, '');\n                return `\n                  <div class=\"color-checkbox\">\n                    <input type=\"checkbox\" id=\"color-${_id}-${cleanColorId}\" name=\"color-${_id}\" value=\"${c}\" />\n                    <label for=\"color-${_id}-${cleanColorId}\" style=\"background-color: ${c};\" title=\"${c}\"></label>\n                  </div>\n                `;\n              })\n              .join('')\n          : '';\n\n      return `\n        <li class=\"furniture-item\" data-id=\"${_id}\">\n          <img class=\"furniture-img\" src=\"${images[0] || ''}\" alt=\"${name}\" />\n          \n          <h3 class=\"furniture-subtitle\">${name}</h3>\n          <div class=\"color-checkboxes\">${colorsMarkup}</div>\n          <p class=\"furniture-text\">${price} грн</p>\n          \n          <button class=\"furniture-btn\" type=\"button\" data-id=\"${_id}\">Детальніше</button>\n        </li>\n      `;\n    })\n    .join('');\n\n  furnitureList.insertAdjacentHTML('beforeend', markup);\n}\n\n// Оновлення кнопки \"Показати ще\"\n\nfunction updateLoadMoreButton(lastBatchCount = state.limit) {\n  const reachedTotal =\n    (typeof state.totalAvailable === 'number' && state.totalAvailable > 0)\n      ? state.totalLoaded >= state.totalAvailable\n      : false;\n\n  const lastPageByBatch = lastBatchCount < state.limit;\n\n  const noMore = reachedTotal || lastPageByBatch;\n\n  loadMoreBtn.classList.toggle('is-hidden', noMore);\n  loadMoreBtn.disabled = noMore;\n}\n\n\n\n// Логіка вибору категорії та оновлення списку меблів\nasync function onCategorySelected(categoryId) {\n  if (categoryId === state.currentCategoryId) return;\n\n  state.currentCategoryId = categoryId;\n  state.currentPage = 1;\n  state.totalLoaded = 0;\n\n  // Акцент вибраної категорії\n  categoriesList.querySelectorAll('.category-item').forEach(item => {\n    item.classList.toggle('active', item.dataset.id === categoryId);\n  });\n\n  const { furnitures, total } = await fetchFurnitures({\n    category: state.currentCategoryId,\n    page: state.currentPage,\n    limit: state.limit\n  });\n  state.totalAvailable = total || 0;\n  state.totalLoaded = furnitures.length;\n\n  \n\n\n  renderFurnitureList(furnitures, false);\n  updateLoadMoreButton();\n\n  // if (state.totalLoaded >= state.totalAvailable) {\n  //   iziToast.info({ message: 'Більше немає товарів у цій категорії!', position: 'topRight' });\n  // }\n}\n\n// Обробник кліку по категорії\ncategoriesList.addEventListener('click', e => {\n  const li = e.target.closest('li.category-item');\n  if (!li) return;\n  onCategorySelected(li.dataset.id);\n});\n\n\n// Обробник кнопки \"Показати ще\"\nloadMoreBtn.addEventListener('click', async () => {\n  if (state.totalLoaded >= state.totalAvailable) return;\n\n  state.currentPage += 1;\n\n  const { furnitures, total } = await fetchFurnitures({\n    category: state.currentCategoryId,\n    page: state.currentPage,\n    limit: state.limit,\n  });\n\n  state.totalAvailable = total ?? state.totalAvailable; \n  state.totalLoaded += furnitures.length;  \n\n\n  renderFurnitureList(furnitures, true);\n  updateLoadMoreButton();\n\n  if (state.totalLoaded >= state.totalAvailable) {\n    iziToast.info({ message: 'Це всі товари. Більше немає що підвантажити.', position: 'topRight' });\n  }\n});\n\n\n\n\nfurnitureList.addEventListener('click', e => {\n  const btn = e.target.closest('.furniture-btn');\n  if (!btn) return;\n\n  const id = btn.dataset.id;\n  \n    const product = state.lastLoadedFurnitures.find(item => item._id === id);\n\n  if (product) {\n    openProductModal(product);\n  } else {\n    iziToast.error({\n      message: 'Товар не знайдено',\n      position: 'topRight',\n    });\n      }\n});\n\n\n\n\n// Початкова ініціалізація\nasync function init() {\n  state.categories = await fetchCategory();\n  categoriesList.innerHTML = createMarkupCategory(\n    state.categories,\n    imgArr,\n    state.currentCategoryId\n  );\n\n  // state.currentPage = 1;\n  // state.totalLoaded = 0;\n\n  const { furnitures, total } = await fetchFurnitures({\n    category: state.currentCategoryId,\n    page: state.currentPage,\n    limit: state.limit\n  });\n\n  state.totalAvailable = total;\n  state.totalLoaded = furnitures.length;\n\n \n  \n\n\n  renderFurnitureList(furnitures, false);\n  updateLoadMoreButton();\n\n\n    if (state.totalLoaded >= state.totalAvailable) {\n    updateLoadMoreButton();\n    iziToast.info({\n      message: 'Більше немає товарів у цій категорії!',\n      position: 'topRight',\n    });\n  } else {\n    updateLoadMoreButton();\n  }\n  \n  \n  // updateLoadMoreButton();\n}\n\ninit();\n\n// Додає слухача для перевірки вибраного кольору для мебелі. Не дає вибирати більше одного кольору.\n//cb - checkbox\ndocument.addEventListener('change', event => {\n  if (event.target.matches('.color-checkbox input[type=\"checkbox\"]')) {\n    const group = event.target.closest('.color-checkboxes');\n    group.querySelectorAll('input[type=\"checkbox\"]').forEach(cb => {\n      if (cb !== event.target) cb.checked = false;\n    });\n  }\n});\n\nasync function loadFurnitures(append) {\n  const { furnitures, total } = await fetchFurnitures({\n    category: state.currentCategoryId,\n    limit: state.limit,\n  });\n  state.totalAvailable = total;\n  state.totalLoaded += furnitures.length;\n  renderFurnitureList(furnitures, append);\n  if (state.totalLoaded >= state.totalAvailable) {\n    updateLoadMoreButton();\n    iziToast.info({\n      message: 'Більше немає товарів у цій категорії!',\n      position: 'topRight',\n    });\n  } else {\n    updateLoadMoreButton();\n  }\n}","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { showLoader, hideLoader } from './loader';\n\nimport Swiper from 'swiper';\nimport { Navigation, Pagination } from 'swiper/modules';\n\nimport 'swiper/css';\nimport 'swiper/css/navigation';\nimport 'swiper/css/pagination';\n\nconst postList = document.querySelector('#feedback-list');\nlet swiperInstance = null;\n\n\nasync function feedbackCards() {\n  \n  try {\n    showLoader();\n    const response = await axios.get('https://furniture-store.b.goit.study/api/feedbacks');\n    const feedbacks = response.data.feedbacks;\n\n    await renderFeedbacks(feedbacks);\n    initSwiper();\n    hideLoader()\n  } catch (error) {\n     hideLoader()\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later.',\n      position: 'topRight',\n    });\n  }\n}\n\nasync function renderFeedbacks(feedbacks) {\n  \n  const slides = feedbacks.map(({ name, descr, rate }) => {\n    const simplifiedRate = simplifyValue(rate);\n    const thumbs = Array.from({ length: 5 }, () => {\n      return `<i class=\"fa-solid fa-thumbs-up thumb-icon\"></i>`;\n    }).join(\"\");\n\n    return `\n   <div class=\"swiper-slide feedback-card\">\n        <div class=\"rate-feedback\" data-rate=\"${simplifiedRate}\">\n          ${thumbs}\n        </div>\n        <p class=\"text-feedback\">${descr}</p>\n        <p class=\"name-user-feedback\">${name}</p>\n</div>\n    `;\n  }).join('');\n\n    postList.innerHTML = `\n   <div class=\"swiper feedback-swiper\">\n    <div class=\"swiper-wrapper\">\n      ${slides}\n    </div>\n\n  </div>\n`;\n\n  await new Promise(resolve => requestAnimationFrame(resolve));\n  animateThumbs();\n}\n\nfunction simplifyValue(value) {\n  if (value >= 3.3 && value <= 3.7) {\n    return 3.5;\n  } else if (value >= 3.8 && value <= 4.2) {\n    return 4;\n  } else {\n    return value;\n  }\n}\n\nfunction animateThumbs() {\n  const allRatings = document.querySelectorAll('.rate-feedback');\n\n  allRatings.forEach(container => {\n    const rate = parseFloat(container.getAttribute('data-rate'));\n    const icons = container.querySelectorAll('.thumb-icon');\n\n        icons.forEach(icon => {\n      icon.classList.remove('fill', 'half');\n    });\n      \n      icons.forEach((icon, index) => {\n      setTimeout(() => {\n        if (index < Math.floor(rate)) {\n          icon.classList.add('fill');\n        } else if (index === Math.floor(rate) && rate % 1 !== 0) {\n          icon.classList.add('half');\n        }\n      }, index * 200);\n    });\n  });\n}\n\n\n\nfunction initSwiper() {\n  if (swiperInstance) {\n    swiperInstance.destroy(true, true);\n  }\n\n  swiperInstance = new Swiper('.feedback-swiper', {\n    modules: [Navigation, Pagination],\n    \n    spaceBetween: 24,\n    slidesPerView: 1,\n    slidesPerGroup: 1,\n    loop: false,\n    navigation: {\n      nextEl: '.swiper-button-next',\n      prevEl: '.swiper-button-prev',\n    },\n    pagination: {\n      el: '.swiper-pagination',\n      clickable: true,\n     \n  dynamicBullets: true,\n  dynamicMainBullets: 5,\n    },\n    breakpoints: {\n      768: {\n        slidesPerView: 2,\n        slidesPerGroup: 2,\n      },\n      1440: {\n        slidesPerView: 3,\n        slidesPerGroup: 3,\n        },\n      },\n      on: {\n          slideChange: () => {\n              animateThumbs();\n        },\n      }\n  });\n}\n\n\n\nfeedbackCards();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// import axios from 'axios';\n\n\n// const postList = document.querySelector('.feedback-list');\n// const leftBtn = document.querySelector('.fa-circle-left');\n// const rightBtn = document.querySelector('.fa-circle-right');\n// const dotsContainer = document.querySelector('.feedback-dots');\n\n// let feedbacks = [];\n// let currentPage = 0;\n// let cardsPerPage = 1;\n// let swiperInstance = null;\n\n// async function feedbackCards() {\n//   try {\n//     const response = await axios.get('https://furniture-store.b.goit.study/api/feedbacks');\n//     feedbacks = response.data.feedbacks;\n\n//     calculateCardsPerPage();\n//     showFeedbackGroup();\n//     createDots();\n//     updateDots();\n//     updateButtonStates();\n//   } catch (error) {\n//     console.error(error);\n//     postList.innerHTML = \"<li>Сталася помилка при завантаженні відгуків.</li>\";\n//   }\n// }\n\n// function showFeedbackGroup() {\n//   const start = currentPage * cardsPerPage;\n//   const end = start + cardsPerPage;\n//   const visibleFeedbacks = feedbacks.slice(start, end);\n\n//   const markup = visibleFeedbacks.map(({ name, descr, rate }) => {\n//   const simplifiedRate = simplifyValue(rate);\n//   const thumbs = Array.from({ length: 5 }, () => {\n//     return `<i class=\"fa-solid fa-thumbs-up thumb-icon\"></i>`;\n//   }).join(\"\");\n\n//   return `\n//     <div class=\"swiper-slide\">\n//       <li class=\"feedback-card\">\n//         <div class=\"rate-feedback\" data-rate=\"${simplifiedRate}\">\n//           ${thumbs}\n//         </div>\n//         <p class=\"text-feedback\">${descr}</p>\n//         <p class=\"name-user-feedback\">${name}</p>\n//       </li>\n//     </div>\n//   `;\n//   }).join(\"\");\n    \n//     postList.innerHTML = markup;\n//     new Swiper('.feedback-swiper', {\n//   slidesPerView: cardsPerPage,\n//   spaceBetween: 20,\n//   allowTouchMove: true, // головне — дозволити свайп\n//   simulateTouch: true,\n//   watchOverflow: true, // не дозволяти свайп, якщо мало слайдів\n// });\n//   animateThumbs();\n// }\n\n\n// function createDots() {\n//   dotsContainer.innerHTML = '';\n//   const totalPages = Math.ceil(feedbacks.length / cardsPerPage);\n\n//   for (let i = 0; i < totalPages; i++) {\n//     const dot = document.createElement('span');\n//     dot.classList.add('dot');\n//     if (i === currentPage) dot.classList.add('active');\n//     dotsContainer.appendChild(dot);\n//   }\n// }\n\n// function updateDots() {\n//   const allDots = dotsContainer.querySelectorAll('.dot');\n//   allDots.forEach(dot => dot.classList.remove('active'));\n//   if (allDots[currentPage]) {\n//     allDots[currentPage].classList.add('active');\n//   }\n// }\n\n// function animateThumbs() {\n//   const allRatings = document.querySelectorAll('.rate-feedback');\n\n//   allRatings.forEach(container => {\n//     const rate = parseFloat(container.getAttribute('data-rate'));\n//     const icons = container.querySelectorAll('.thumb-icon');\n\n//     icons.forEach((icon, index) => {\n//       setTimeout(() => {\n//         if (index < Math.floor(rate)) {\n//           icon.classList.add('fill');\n//         } else if (index === Math.floor(rate) && rate % 1 !== 0) {\n//           icon.classList.add('half');\n//         }\n//       }, index * 150);\n//     });\n//   });\n// }\n\n// function simplifyValue(value) {\n//   if (value >= 3.3 && value <= 3.7) {\n//     return 3.5;\n//   } else if (value >= 3.8 && value <= 4.2) {\n//     return 4;\n//   } else {\n//     return value;\n//   }\n// }\n\n// function updateButtonStates() {\n//   const totalPages = Math.ceil(feedbacks.length / cardsPerPage);\n\n//   leftBtn.classList.toggle('inactive', currentPage === 0);\n//   rightBtn.classList.toggle('inactive', currentPage >= totalPages - 1);\n// }\n\n\n// function calculateCardsPerPage() {\n//   const width = window.innerWidth;\n\n//   if (width >= 1440) {\n//     cardsPerPage = 3;\n//   } else if (width >= 768) {\n//     cardsPerPage = 2;\n//   } else {\n//     cardsPerPage = 1;\n//   }\n// }\n\n// leftBtn.addEventListener('click', () => {\n//   if (currentPage > 0) {\n//     currentPage--;\n//     showFeedbackGroup();\n//     updateDots();\n//     updateButtonStates();\n//   }\n// });\n\n// rightBtn.addEventListener('click', () => {\n//   const totalPages = Math.ceil(feedbacks.length / cardsPerPage);\n//   if (currentPage < totalPages - 1) {\n//     currentPage++;\n//     showFeedbackGroup();\n//     updateDots();\n//     updateButtonStates();\n//   }\n// });\n\n// window.addEventListener('resize', () => {\n//   calculateCardsPerPage();\n//   showFeedbackGroup();\n//   createDots();\n//   updateDots();\n//   updateButtonStates();\n// });\n\n// feedbackCards();\n"],"names":["headerMenu","burgerBtn","closeBtn","mobileMenuLinks","toggleMenuVisibility","mediaQuery","link","event","windowWidth","isClickInsideMenu","isClickOnBurgerBtn","isClickOnCloseBtn","loaderOverlay","showLoader","hideLoader","sendOrder","orderData","response","errorText","orderModal","orderModalForm","orderModalCloseBtn","openOrderModal","furnitureId","color","closeModalOnEsc","closeModalOnOverlayClick","closeOrderModal","email","phoneRaw","comment","phone","error","message","img1x","img2x","img3x","img4x","img5x","img6x","img7x","img8x","img9x","img10x","img11x","img12x","img13x","img14x","img15x","img16x","img17x","img18x","img19x","img20x","img21x","img22x","img23x","img24x","img25x","img26x","backdrop","modalContent","openProductModal","product","iziToast","rate","thumbsMarkup","img","index","animateThumbsInModal","smallImages","e","thumb","mainImage","tempSrc","form","checkedColor","closeModal","ratingContainer","icons","icon","cb","furnitureList","categoriesList","loadMoreBtn","API_BASE","imgArr","state","fetchCategory","axios","createMarkupCategory","categories","arrImg","activeId","firstLi","otherItems","_id","name","i","fetchFurnitures","category","page","limit","params","res","furnitures","total","renderFurnitureList","append","markup","price","images","colorsMarkup","c","cleanColorId","updateLoadMoreButton","lastBatchCount","reachedTotal","lastPageByBatch","noMore","onCategorySelected","categoryId","item","li","btn","id","init","postList","swiperInstance","feedbackCards","feedbacks","renderFeedbacks","initSwiper","slides","descr","simplifiedRate","simplifyValue","thumbs","resolve","animateThumbs","value","container","Swiper","Navigation","Pagination"],"mappings":"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"}